# WebStor

Репозиторий, помимо исходного текста, содержит базу данных с тремя пользователями.
В директории __WebApp\App\_Start__ находится настроечный файл __app\_config.xml__.
В нем необходимо прописать пути к базе данных, конфигурационному файлу NHibernate, к папке - хранилищу файлов и инициализирующему sql-скрипту.

Скрипт, инициализирующий таблицу с пользователями, расположен в __DBModel\App\_Data\fill\_users.sql__. Он содержит 3 учетных записи с паролями, соотвественно адресам почты(у _ivanov@gmail.com_ пароль _ivanov_, у остальных соответственно). При выполнении он полностью __очищает таблицы__, в том числе документы, поэтому лучше после первого запуска удалить значение параметра __init\_script__ (но не сам параметр) из  __app\_config.xml__.

Конфигурационный файл NHibernate расположен в __DBModel\__. Параметр __hbm2ddl.auto__ выставлен в значение __update__. При заполнении пустой базы (без схемы вообще), думаю, лучше поставить в __create__. __После первого запуска__ обратно в __update__, иначе - чистая база при каждом запуске.

Конфигурирование протестировано на базе без таблиц с полностью заполненным __app\_config.xml__ и __hbm2ddl.auto__ в __create__. 

Исходный текст хранимой процедуры __DBModel\App\_Data\__. После создания базы с нуля (если такое будет) надо добавить. NHibernate и sql-скрипт ее не трогают.

Если что-то не заработает с настроечным файлом - можно все прописать прямо в классе ``ConfigHelper``

Use Case диаграмма в корне репозитория

